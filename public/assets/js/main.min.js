"use strict";function notifyMessage(message,type){$.notify({message:message},{element:"body",type:type,allow_dismiss:!0,newest_on_top:!0,placement:{from:"top",align:"center"}})}function init_datepicker(){$(".datepicker").datepicker({rtl:KTUtil.isRTL(),todayHighlight:!0,orientation:"bottom left",templates:{leftArrow:'<i class="la la-angle-left"></i>',rightArrow:'<i class="la la-angle-right"></i>'},format:"yyyy-mm-dd"})}function init_datepicker(){$(".datepicker").datepicker({rtl:KTUtil.isRTL(),todayHighlight:!0,orientation:"bottom left",templates:{leftArrow:'<i class="la la-angle-left"></i>',rightArrow:'<i class="la la-angle-right"></i>'},format:"yyyy-mm-dd"})}function init_timepicker(){$(".timepicker").timepicker({minuteStep:1,secondStep:1,defaultTime:"",showSeconds:!0,showMeridian:!1,snapToStep:!0}),$(".timepicker").on("change load",(function(){var t=$(this),h;":"==t.val().substring(2,1)&&$(this).val("0"+t.val())}))}function init_select2(element,url){$("#"+element).select2({ajax:{url:BASE_URL+"/support/"+url,dataType:"json",delay:250,data:function(params){return{q:params.term,page:params.page}},processResults:function(response){return{results:response}},cache:!0},minimumInputLength:1})}function init_ckeditor(element){ClassicEditor.create(document.querySelector(element),{toolbar:{items:["undo","redo","|","heading","|","bold","italic","|","bulletedList","numberedList","|","insertTable","ckfinder","mediaEmbed","link","blockQuote"]},image:{toolbar:["imageStyle:full","imageStyle:side","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en",ckfinder:{uploadUrl:HOST_URL,options:{resourceType:"Images"}}}).then(editor=>{console.log(editor)}).catch(error=>{console.error(error)})}jQuery(document).ready((function(){$('[data-toggle="tooltip"]').tooltip(),$("#general-modal").on("hidden.bs.modal",(function(){$("#general-modal .modal-dialog").removeClass("modal-sm modal-md modal-lg"),$("#general-modal .modal-title").html(""),$("#general-modal .modal-body").html(""),$("#modal-ok-button").attr("data-action",""),$("#modal-ok-button").attr("data-nya","")})),$("#filter-modal-trigger").on({focus:function(){$(this).blur()}}),$("[data-action='detail']").on("click",(function(){var id=$(this).attr("data-nya");$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:BASE_URL+"/support/"+id,dataType:"JSON",success:function(response){response.status?($("#general-modal .modal-dialog").addClass("modal-lg"),$("#general-modal .modal-title").html("Detail"),$("#general-modal .modal-body").html(response.detail),$("#modal-ok-button").attr("data-action","close-modal"),$("#general-modal").modal("show")):notifyMessage(response.message,"danger")},error:function(request,status,error){$("#deleteModal").modal("hide"),notifyMessage("Terjadi kesalahan. Coba beberapa saat lagi.","danger")}})})),$(".im_datatable").on("click","[data-action='detail']",(function(){var id=$(this).attr("data-nya");$("[name=isPermanent]").attr("checked",!1),$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:HOST_URL+"/detail/"+id,dataType:"JSON",success:function(response){response.status?($("#general-modal .modal-dialog").addClass("modal-lg"),$("#general-modal .modal-title").html("Detail"),$("#general-modal .modal-body").html(response.detail),$("#modal-ok-button").attr("data-action","close-modal"),$("#general-modal").modal("show")):notifyMessage(response.message,"danger")},error:function(request,status,error){$("#deleteModal").modal("hide"),notifyMessage("Terjadi kesalahan. Coba beberapa saat lagi.","danger")}})})),$(".im_datatable").on("click","[data-action='delete']",(function(){var id=$(this).attr("data-nya");$("[name=isPermanent]").attr("checked",!1),$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:HOST_URL+"/delete/"+id,dataType:"JSON",success:function(response){response.status?($("#general-modal .modal-dialog").addClass("modal-md"),$("#general-modal .modal-title").html("Konfirmasi Hapus"),$("#general-modal .modal-body").html(response.detail),$("#modal-ok-button").attr("data-action","do-delete"),$("#modal-ok-button").attr("data-nya",response.data),$("#general-modal").modal("show")):notifyMessage(response.message,"danger")},error:function(request,status,error){$("#deleteModal").modal("hide"),notifyMessage("Terjadi kesalahan. Coba beberapa saat lagi.","danger")}})})),$(".im_datatable").on("click","[data-action='restore']",(function(){var module=$(this).attr("data-module"),id=$(this).attr("data-nya");$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:BASE_URL+"/support/"+module+"/detail/"+id,dataType:"JSON",success:function(response){response.status?($("#general-modal .modal-dialog").addClass("modal-md"),$("#general-modal .modal-title").html("Konfirmasi Restore Data"),$("#general-modal .modal-body").html(response.detail),$("#modal-ok-button").attr("data-action","do-restore"),$("#modal-ok-button").attr("data-module",module),$("#modal-ok-button").attr("data-nya",response.data),$("#general-modal").modal("show")):notifyMessage(response.message,"danger")},error:function(request,status,error){$("#deleteModal").modal("hide"),notifyMessage("Terjadi kesalahan. Coba beberapa saat lagi.","danger")}})})),$(".im_datatable").on("click","[data-action='delete-permanent']",(function(){var module=$(this).attr("data-module"),id=$(this).attr("data-nya");$("[name=isPermanent]").attr("checked",!1),$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:BASE_URL+"/support/"+module+"/delete/"+id,dataType:"JSON",success:function(response){response.status?($("#general-modal .modal-dialog").addClass("modal-md"),$("#general-modal .modal-title").html("Konfirmasi Hapus Permanen"),$("#general-modal .modal-body").html(response.detail),$("#modal-ok-button").attr("data-action","do-delete-permanent"),$("#modal-ok-button").attr("data-module",module),$("#modal-ok-button").attr("data-nya",response.data),$("[name=isPermanent]").prop("checked",!0),$("#general-modal").modal("show")):notifyMessage(response.message,"danger")},error:function(request,status,error){$("#deleteModal").modal("hide"),notifyMessage("Terjadi kesalahan. Coba beberapa saat lagi.","danger")}})})),$(".modal-footer").on("click",'[data-action="close-modal"]',(function(){$("#general-modal").modal("hide")})),$(".modal-footer").on("click",'[data-action="do-delete"]',(function(){var id=$(this).attr("data-nya"),permanent=$("[name=isPermanent]").is(":checked");$.ajax({type:"DELETE",contentType:"application/json; charset=utf-8",url:HOST_URL+"/delete/"+id,dataType:"JSON",data:{permanent:permanent},success:function(response){$("#general-modal").modal("hide"),response.status?($("#detailDeleteItem").html(""),notifyMessage(response.message,"success")):notifyMessage(response.message,"danger"),$("#reload-button").click()},error:function(request,status,error){$("#general-modal").modal("hide"),notifyMessage("Terjadi kesalahan. Coba beberapa saat lagi.","danger")}})})),$(".modal-footer").on("click",'[data-action="do-restore"]',(function(){var id=$(this).attr("data-nya"),module=$(this).attr("data-module");$.ajax({type:"PATCH",contentType:"application/json; charset=utf-8",url:BASE_URL+"/support/"+module+"/restore/"+id,dataType:"JSON",success:function(response){$("#general-modal").modal("hide"),response.status?($("#detailDeleteItem").html(""),notifyMessage(response.message,"success")):notifyMessage(response.message,"danger"),$("#reload-button").click()},error:function(request,status,error){$("#general-modal").modal("hide"),notifyMessage("Terjadi kesalahan. Coba beberapa saat lagi.","danger")}})})),$(".modal-footer").on("click",'[data-action="do-delete-permanent"]',(function(){var id=$(this).attr("data-nya"),module=$(this).attr("data-module"),permanent=$("[name=isPermanent]").is(":checked");$.ajax({type:"DELETE",contentType:"application/json; charset=utf-8",url:BASE_URL+"/support/"+module+"/delete/"+id,dataType:"JSON",data:{permanent:permanent},success:function(response){$("#general-modal").modal("hide"),response.status?($("#detailDeleteItem").html(""),notifyMessage(response.message,"success")):notifyMessage(response.message,"danger"),$("#reload-button").click()},error:function(request,status,error){$("#general-modal").modal("hide"),notifyMessage("Terjadi kesalahan. Coba beberapa saat lagi.","danger")}})}))}));