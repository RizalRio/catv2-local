"use strict";var KTUserEdit=function(){var avatar,_avatar=function(){avatar=new KTImageInput("kt_user_edit_avatar")},_handlePersonalForm=function(){var validation;validation=FormValidation.formValidation(KTUtil.getById("kt_form_personal"),{fields:{fullname:{validators:{notEmpty:{message:"Nama lengkap is required"}}},address:{validators:{notEmpty:{message:"Alamat is required"}}},phone:{validators:{notEmpty:{message:"No. HP is required"}}},concentration:{validators:{notEmpty:{message:"Tujuan tes is required"}}},purpose:{validators:{notEmpty:{message:"Detail tujuan tes is required"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,submitButton:new FormValidation.plugins.SubmitButton,bootstrap:new FormValidation.plugins.Bootstrap}}),$("#kt_form_personal_submit").on("click",(function(e){e.preventDefault(),validation.validate().then((function(status){"Valid"==status&&$.ajax({type:"POST",url:BASE_URL+"/account/personal",data:$("#kt_form_personal").serialize(),dataType:"JSON",success:function(response){response.status?(notifyMessage(response.message,"success"),$("#fullname").html($("[name=fullname").val()),$("#kt_form_personal input, textarea, select").removeClass("is-valid")):notifyMessage(response.message,"danger")}})}))}))},_handleAccountForm=function(e){var validation,form=KTUtil.getById("kt_form_account");validation=FormValidation.formValidation(form,{fields:{username:{validators:{notEmpty:{message:"Username is required"}}},email:{validators:{notEmpty:{message:"Email address is required"},emailAddress:{message:"The value is not a valid email address"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap}}),$("#kt_form_account_submit").on("click",(function(e){e.preventDefault(),validation.validate().then((function(status){"Valid"==status&&$.ajax({type:"POST",url:BASE_URL+"/account/account",data:new FormData($("#kt_form_account")[0]),contentType:!1,cache:!1,processData:!1,dataType:"JSON",success:function(response){response.status?(notifyMessage(response.message,"success"),$("#cancel-avatar").click(),$("#kt_user_edit_avatar").css("background-image","url("+response.avatar+")"),$("#avatar").css("background-image","url("+response.avatar+")"),$("#email").html($("[name=email").val()),$("#kt_form_account input").removeClass("is-valid")):notifyMessage(response.message,"danger")}})}))}))},_handlePasswordForm=function(e){var validation;validation=FormValidation.formValidation(KTUtil.getById("kt_form_password"),{fields:{password:{validators:{notEmpty:{message:"Password is required"}}},npassword:{validators:{notEmpty:{message:"Password baru is required"}}},cpassword:{validators:{notEmpty:{message:"Konfirmasi password baru is required"},identical:{compare:function(){return form.querySelector('[name="npassword"]').value},message:"Password baru tidak sama"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap}}),$("#kt_form_password_submit").on("click",(function(e){e.preventDefault(),validation.validate().then((function(status){"Valid"==status&&$.ajax({type:"POST",url:BASE_URL+"/account/password",data:$("#kt_form_password").serialize(),dataType:"JSON",success:function(response){response.status?(notifyMessage(response.message,"success"),$("#kt_form_password").reset(),$("#kt_form_password input").removeClass("is-valid")):notifyMessage(response.message,"danger")}})}))}))};return{init:function(){_avatar(),_handlePersonalForm(),_handleAccountForm(),_handlePasswordForm()}}}();jQuery(document).ready((function(){KTUserEdit.init(),autosize($("[name=address]")),autosize($("[name=purpose]"))}));